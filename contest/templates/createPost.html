{% extends 'base.html' %}
{% load static %}

{% block header %}



    <title>createPost</title>
    <link rel="stylesheet" href="{% static 'css/createPost.css' %}">
    
    <link href="static/css/jquery-ui.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- <script src="{% static 'js/createPost.js' %}"></script> -->

    <style>
        .container-fluid {
            margin-bottom: 15%;
            padding-top: 1rem !important;
            padding-left: 10rem !important;
            padding-right: 10rem !important;
        }
        input:focus,

textarea:focus {
    outline: none;
}

#title {
    font-size: 30px;
    border: 0;
    margin: 40px;
    padding: 30px;
    border-bottom: 1px solid #012840
}

#article {
    border: none;
    margin: 40px;
    padding: 30px;
    border-bottom: 1px solid #012840
}

#image {
    margin: 40px;
}

.date {
    margin: 40px auto;
    text-align: center; 
}

#category {
    margin: 40px;
    padding: 10px;
    border: 1px solid #012840;
    border-radius: 10px;
}

.block_a{
    width: 45.5%;
    border-radius: 10px;
}

.block_b{
    width: 45.5%;
    border-radius: 10px;
}

.category {
    margin-left: 50px;
    margin-right: 20px;
}

#prize {
    margin: 40px;
    padding: 10px;
    border: 1px solid #012840;
    border-radius: 10px;
}

.prize {
    margin-left: 50px;
    margin-right: 20px;
}

#submit {
    margin: 40px;
    float: right;
}

.upload label {
    display: inline-block;
    padding: .5em .75em;
    color: black;
    font-size: inherit;
    line-height: normal;
    vertical-align: middle;
    background-color: #fff;
    cursor: pointer;
    border: 1px solid #012840;
    border-radius: .25em;
    -webkit-transition: background-color 0.2s;
    transition: background-color 0.2s;
}

.upload label:hover {
    background-color: #012840;
    color: white;
}

.upload label:active {
    background-color: #0583F2;
    color: white;
}

.upload input[type="file"] {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}
    </style>

    <script>
        window.onload = $(function () {
            fn_default_datepicker();
        });

        function fn_default_datepicker() {
            
            var start = $("#datepicker_start").datepicker({
                dateFormat: 'yy-mm-dd' //Input Display Format 변경
                , showOtherMonths: true //빈 공간에 현재월의 앞뒤월의 날짜를 표시
                , showMonthAfterYear: true //년도 먼저 나오고, 뒤에 월 표시
                , changeYear: true //콤보박스에서 년 선택 가능
                , changeMonth: true //콤보박스에서 월 선택 가능                
                //,showOn: "both" //button:버튼을 표시하고,버튼을 눌러야만 달력 표시 ^ both:버튼을 표시하고,버튼을 누르거나 input을 클릭하면 달력 표시
                //,buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif" //버튼 이미지 경로
                //,buttonImageOnly: true //기본 버튼의 회색 부분을 없애고, 이미지만 보이게 함
                , buttonText: "선택" //버튼에 마우스 갖다 댔을 때 표시되는 텍스트                
                , yearSuffix: "년" //달력의 년도 부분 뒤에 붙는 텍스트
                , monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 텍스트
                , monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 Tooltip 텍스트
                , dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'] //달력의 요일 부분 텍스트
                , dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'] //달력의 요일 부분 Tooltip 텍스트
                , minDate: "0M" //최소 선택일자(-1D:하루전, -1M:한달전, -1Y:일년전)
                , maxDate: "+1Y" //최대 선택일자(+1D:하루후, -1M:한달후, -1Y:일년후)                
            });

            var end = $("#datepicker_end").datepicker({
                dateFormat: 'yy-mm-dd' //Input Display Format 변경
                , showOtherMonths: true //빈 공간에 현재월의 앞뒤월의 날짜를 표시
                , showMonthAfterYear: true //년도 먼저 나오고, 뒤에 월 표시
                , changeYear: true //콤보박스에서 년 선택 가능
                , changeMonth: true //콤보박스에서 월 선택 가능                
                //,showOn: "both" //button:버튼을 표시하고,버튼을 눌러야만 달력 표시 ^ both:버튼을 표시하고,버튼을 누르거나 input을 클릭하면 달력 표시  
                //,buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif" //버튼 이미지 경로
                //,buttonImageOnly: true //기본 버튼의 회색 부분을 없애고, 이미지만 보이게 함
                , buttonText: "선택" //버튼에 마우스 갖다 댔을 때 표시되는 텍스트                
                , yearSuffix: "년" //달력의 년도 부분 뒤에 붙는 텍스트
                , monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 텍스트
                , monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'] //달력의 월 부분 Tooltip 텍스트
                , dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'] //달력의 요일 부분 텍스트
                , dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'] //달력의 요일 부분 Tooltip 텍스트
                , minDate: "0M" //최소 선택일자(-1D:하루전, -1M:한달전, -1Y:일년전)
                , maxDate: "+1Y" //최대 선택일자(+1D:하루후, -1M:한달후, -1Y:일년후)
                , defaultDate: "+1w"
            });

            //초기값을 오늘 날짜로 설정
            $('#datepicker_start').datepicker('setDate', 'today'); //(-1D:하루전, -1M:한달전, -1Y:일년전), (+1D:하루후, -1M:한달후, -1Y:일년후)
            $('#datepicker_end').datepicker('setDate', '+7D'); //(-1D:하루전, -1M:한달전, -1Y:일년전), (+1D:하루후, -1M:한달후, -1Y:일년후)
        }

        function getDate(element) {
            var date;
            var dateFormat = "yy-mm-dd";
            try {
                date = $.datepicker.parseDate(dateFormat, element.value);
            } catch (error) {
                date = null;
            }
            return date;
        }

        
    </script>
{% endblock %}

{% block main %}
<main>
    <div class="container-fluid">
        <script src="../js/createPost.js"></script>
        <form action="{% url 'create' %}" enctype="multipart/form-data" method="POST" onsubmit="return blank_check()">
            {% csrf_token %}
            <div id="title">

                    <input type="text" name="title" placeholder="공모전 제목" style="width:100%; border: none;">
                    <br>
            </div>

            <div id="article">
                <textarea rows=20 name="content" placeholder="공모전에 대한 설명을 구체적으로 작성해주세요."
                    style="width:100%; border: none;"></textarea>
                <br>
            </div>

            <div id="image" class="upload">
                <label for="upload">사진 업로드</>
                    <input class="form-control" id="upload" type="file" name="image" style="border: 1px solid #012840;">
                    <br>
            </div>

            <div class="date" style="border-radius: 10px !important;">
                <div class="block_a" style="display: inline-block; vertical-align: top;">
                    <label>시작 날짜</label>
                    <input class="form-control" type="text" placeholder="start_date" name="start_date"
                    style="border: 1px solid #012840;" id="datepicker_start" >
                </div>

                <div class="block_b" style="display: inline-block; vertical-align: top;">
                    <label>마감 날짜</label>
                    <input class="form-control" type="text" placeholder="end_date" name="end_date"
                    style="border: 1px solid #012840;" id="datepicker_end" >

                </div>

                
            </div>
            

        <div id='category'>
            <label>카테고리</label>
            <input type="checkbox" name="category[]" id="category1" value="마케팅 및 홍보" class="category">마케팅 및 홍보
            <input type="checkbox" name="category[]" id="category2" value="기획 및 아이디어" class="category">기획 및 아이디어
            <input type="checkbox" name="category[]" id="category3" value="로고 및 네이밍" class="category">로고 및 네이밍
            <br>
        </div>

            <div id="prize">
                <label>경품종류</label>
                <input type="radio" name="prize_type" id="prize_type1" value="현금" class="prize">현금
                <input type="radio" name="prize_type" id="prize_type2" value="상품권" class="prize">상품권
                <input type="radio" name="prize_type" id="prize_type3" value="상품" class="prize">상품
                <br>

                <label>총 상금액</label>
                <input type='number' id='total_prize' name='total_prize' style="margin-left: 50px;">
            </div>

            <div class ="container">
                <div id="check_message" style="margin: 40px; float:left">
                    <h6 style>모든 필드를 채웠는지 확인해주세요</h6>
                </div>
    
                <div id="submit" >
                    <input class="btn btn-outline-dark" type="submit"float:right" value="제출하기">
                </div>
            </div>
            
        </form>
    

        
    </div>

    <script>




        $(document).ready(function(){
            
            $("#datepicker_start").on("click",function(){
                
            });
         
            $("#datepicker_start").on("change",function(e){
                 var end = $( "#datepicker_end" ).datepicker( "option", "minDate", getDate( e.target ) );
             });
             
             $("#datepicker_end").on("change",function(e){
                 
             });
             
             $("#date_search").on("click",function(){
                 var start = $("#datepicker_start").val();
                 var end = $("#datepicker_end").val();
             });    
        });

        function blank_check()
        {
            var title = document.getElementById("title").value;
            var article= document.getElementById("article").value;
            var total_prize = document.getElementById("total_prize").value;
            // var prize = document.getElementsByName("prize").values;
            // var category = document.getElementsByClassName("category").values;

            var isSelected_one=0;
            var isSelected_two=0;
            // for (var i=0; i<3; i++){
            //     var category = document.getElementsByClassName("category")[i];
            //     if(category.checked ==true){
            //         console.log("체크!")
            //         isSelected_one=1;
            //         break;
            //     }
            // }

            // for (var j=0; j<3; j++){
            //      var prize = document.getElementsByClassName("prize")[i];
            //      if(prize.checked==true){
            //          console.log("체크!")
            //          isSelected_two=1;
            //          break;
            //     }
            // }
            
   
            if((title == '') || (article == "") || (total_prize == "") ){
                alert("빈칸을 채워주세요!");
                return false;
            }
            else{
                alert("등록되었습니다");
                return true;
            }
        }
    </script>
</main>

{% endblock %}